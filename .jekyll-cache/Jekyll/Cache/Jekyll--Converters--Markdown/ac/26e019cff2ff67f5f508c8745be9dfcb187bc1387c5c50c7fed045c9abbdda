I"—C<p class="lead">Fun√ß√µes podem ter argumentos opcionais com valores pr√©-definidos</p>

<h2 id="argumentos-opcionais">Argumentos opcionais</h2>

<p>Chegou a hora de cumprir (parcialmente) a promessa que eu fiz quando falei pela primeira vez do comando <code class="language-plaintext highlighter-rouge">help()</code> na p√°gina sobre <a href="/LOM3260/docs/tema3/02-documentacao.html">Documenta√ß√£o</a>. Ali vimos que a fun√ß√£o <code class="language-plaintext highlighter-rouge">print()</code> tem uma s√©rie de argumentos opcionais, al√©m dos obrigat√≥rios (que s√£o os objetos que queremos imprimir, naturalmente). J√° vimos exemplos disso antes: a fun√ß√£o <code class="language-plaintext highlighter-rouge">range()</code>, por exemplo, pode ser chamada com um argumento obrigat√≥rio (<code class="language-plaintext highlighter-rouge">end</code>) e at√© dois opcionais (<code class="language-plaintext highlighter-rouge">start</code> e <code class="language-plaintext highlighter-rouge">step</code>), como vimos na √∫ltima aula do Tema 1, <a href="/LOM3260/docs/tema1/10-in-len.html">Comandos in e len()</a>.</p>

<p>Vamos l√° ent√£o ver mais detalhes. Para entender o que s√£o os argumentos opcionais, comecemos considerando a fun√ß√£o <code class="language-plaintext highlighter-rouge">round()</code>, que faz parte do python padr√£o. O comando <code class="language-plaintext highlighter-rouge">help(round)</code> fornece a seguinte docstring:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Help on built-in function round in module builtins:

round(...)
    round(number[, ndigits]) -&gt; number

    Round a number to a given precision in decimal digits (default 0 digits).
    This returns an int when called with one argument, otherwise the
    same type as the number. ndigits may be negative.
</code></pre></div></div>
<p>Da docstring da fun√ß√£o, lemos que <code class="language-plaintext highlighter-rouge">round()</code> pode ser chamada com um ou dois argumentos e serve para arredondar um float para um dado n√∫mero de casas decimais. O primeiro argumento (<code class="language-plaintext highlighter-rouge">number</code>) √© o n√∫mero que se deseja arredondar, e esse argumento √© obrigat√≥rio. J√° o segundo argumento (<code class="language-plaintext highlighter-rouge">ndigits</code>), o n√∫mero de algarismos decimais, √© opcional. Se n√£o for fornecido, ele tem o valor padr√£o (zero), e a fun√ß√£o retornar√° o <code class="language-plaintext highlighter-rouge">int</code> mais pr√≥ximo de <code class="language-plaintext highlighter-rouge">number</code>. Mas, se o usu√°rio fornecer o segundo argumento, a fun√ß√£o <code class="language-plaintext highlighter-rouge">round()</code> retornar√° um <code class="language-plaintext highlighter-rouge">float</code> correspondendo a <code class="language-plaintext highlighter-rouge">number</code> arredondado com o n√∫mero de casas desejado. Compare as sa√≠das dos seguintes chamados √† fun√ß√£o <code class="language-plaintext highlighter-rouge">round()</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mf">3.141592653589793</span>
<span class="k">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="argumentos-por-nome">Argumentos por nome</h2>

<p>Vamos agora fazer um malabarismo. Conhecer os nomes das vari√°veis usadas como refer√™ncia aos argumentos √© uma informa√ß√£o interessante: Se os conhecemos, podemos chamar a fun√ß√£o usando <strong>named arguments</strong>, ou <em>argumentos por nome</em>. Veja esse exemplo:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mf">3.141592653589793</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">number</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</code></pre></div></div>
<p>Essa chamada a <code class="language-plaintext highlighter-rouge">round</code> √© 100% equivalente a <code class="language-plaintext highlighter-rouge">round(x, 2)</code>. Mas, com argumentos por nome, podemos at√© mesmo trocar a ordem dos argumentos:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mf">3.141592653589793</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</code></pre></div></div>
<p>Tudo continua exatamente equivalente.</p>

<p>Pode parecer pouca vantagem nesse ponto, mas usar argumentos por nome √© uma √≥tima maneira de deixar seu c√≥digo mais leg√≠vel, se usamos nomes auto-explicativos, al√©m de tornar irrelevante a ordem dos argumentos nas chamadas √† fun√ß√£o.</p>

<p class="alert alert-warning">:warning: Se voc√™ n√£o usa argumentos por nome, a ordem dos argumentos continua importante!!!</p>

<p>Voc√™ tamb√©m pode mesclar a maneira como fornece os argumentos: uma parte sem nomes, outra parte com:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mf">3.141592653589793</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</code></pre></div></div>
<p>Esse c√≥digo tamb√©m √© equivalente aos anteriores.</p>

<p class="alert alert-danger">:x: N√£o se pode come√ßar com argumentos por nome e depois fornecer argumentos sem nome. Por exemplo, <code class="language-plaintext highlighter-rouge">round(ndigits=2, 5)</code> termina numa mensagem de erro (fa√ßa o teste!), assim como <code class="language-plaintext highlighter-rouge">round(number=5, 2)</code>, mas <code class="language-plaintext highlighter-rouge">round(5, ndigits=2)</code> √© plenamente aceit√°vel.</p>

<h2 id="crie-fun√ß√µes-com-argumentos-opcionais">Crie fun√ß√µes com argumentos opcionais</h2>

<p>Com os conhecimentos apenas adquiridos, podemos come√ßar a criar nossas pr√≥prias fun√ß√µes com argumentos opcionais. √â um processo muito simples: basta usar valores padr√£o quando da defini√ß√£o da fun√ß√£o usando <code class="language-plaintext highlighter-rouge">def</code>. Eu sei que isso n√£o quer dizer nada pra voc√™! Ent√£o vamos ver um exemplo.</p>

<div class="col-md-3 float-right">
<div class="text-center">
<figure class="figure">
  
  <a href="#" data-toggle="modal" data-target="#circ">
  
    <img class="figure-img img-fluid rounded mx-auto" src="/LOM3260/assets/images/tikz/setor-circulo.png-1.png" alt="Um setor circular" title="Um setor circular" />
  
  </a>
  
  
  <figcaption class="figure-caption">
    Um setor circular
  </figcaption>
  

<!-- Modal -->

<div class="modal fade" id="circ" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-light bg-dark">
        <h5>Um setor circular</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span class="text-light" aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <a id="no-ext-link" href="/LOM3260/assets/images/tikz/setor-circulo.png-1.png" target="_blank">
        <img class="figure-img img-fluid rounded w-100mx-auto" src="/LOM3260/assets/images/tikz/setor-circulo.png-1.png" alt="Um setor circular" title="Um setor circular" />
        </a>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>


</figure>
</div>

</div>

<p>Para manter as coisas simples, vamos definir uma fun√ß√£o para calcular a √°rea de um setor circular (uma fatia de pizza!) de √¢ngulo $\theta$ num c√≠rculo de raio $r$, como na figura. A √°rea em quest√£o √© dada pela f√≥rmula a seguir:</p>

\[A=\frac{1}{2} \theta r^2\]

<p>sendo que $\theta$ precisa estar em radianos. Al√©m disso, a sua fun√ß√£o deve calcular a √°rea do c√≠rculo completo ($\theta=2\pi$) se o usu√°rio fornecer s√≥ o raio, que √© ent√£o o √∫nico argumento obrigat√≥rio.</p>

<p>Eu faria assim:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="k">def</span> <span class="nf">area_pizza</span><span class="p">(</span><span class="n">raio</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span><span class="p">):</span>
  <span class="k">return</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">theta</span> <span class="o">*</span> <span class="n">raio</span> <span class="o">*</span> <span class="n">raio</span>
</code></pre></div></div>

<p>Veja, em primeiro lugar, que eu importei o <code class="language-plaintext highlighter-rouge">numpy</code> para poder usar a defini√ß√£o de $\pi$ contida nesse m√≥dulo (<code class="language-plaintext highlighter-rouge">numpy.pi</code>). A seguir, veja que, na defini√ß√£o da fun√ß√£o <code class="language-plaintext highlighter-rouge">area_pizza</code>, o argumento <code class="language-plaintext highlighter-rouge">raio</code> n√£o tem nenhum valor pr√©-definido, diferente de $\theta$, cujo valor pr√©-definido √© <code class="language-plaintext highlighter-rouge">2*np.pi</code>. Por isso:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">raio</code> √© um argumento obrigat√≥rio da fun√ß√£o;</li>
  <li><code class="language-plaintext highlighter-rouge">theta</code> √© um argumento opcional, sendo que o valor pr√©-definido (padr√£o) √© <code class="language-plaintext highlighter-rouge">2*np.pi</code>;</li>
  <li>os argumentos obrigat√≥rios devem vir antes dos opcionais na defini√ß√£o da fun√ß√£o usando <code class="language-plaintext highlighter-rouge">def</code>.</li>
</ul>

<p>Assim, todo argumento opcional tem um valor pr√©-definido e vice-versa: todo argumento com um valor pr√©-definido √© opcional.</p>

<p>Voc√™ pode deixar as coisas mais claras para o usu√°rio se acrescentar uma docstring:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="k">def</span> <span class="nf">area_pizza</span><span class="p">(</span><span class="n">raio</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">pi</span><span class="p">):</span>
  <span class="s">'''
    Calcula a √°rea de uma fatia de pizza

    Uso:
      area_pizza(raio, theta=2*np.pi)

    entrada:
      - raio (float, obrigat√≥rio): o raio da pizza
      - theta (float, opcional, padr√£o: 2*pi): o √¢ngulo da fatia.
          Se n√£o for fornecido, calcula a √°rea da pizza inteira.
    sa√≠da:
      - a √°rea da fatia (float)
  '''</span>
  <span class="k">return</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="n">theta</span> <span class="o">*</span> <span class="n">raio</span> <span class="o">*</span> <span class="n">raio</span>
</code></pre></div></div>

<p>Vamos ent√£o brincar com a fun√ß√£o com algumas chamadas. Teste todas no int√©rprete python!</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">r</span> <span class="o">=</span> <span class="mi">25</span>  <span class="c1"># pizza com di√¢metro de 50cm!
</span><span class="n">corte</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">8</span>  <span class="c1"># um de oito peda√ßos da pizza
</span>
<span class="n">Apizza</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="n">Apedaco</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">corte</span><span class="p">)</span>
<span class="n">Apedacoduplo</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">corte</span><span class="p">)</span>
</code></pre></div></div>

<p>Vamos agora calcular a √°rea de um peda√ßo de pizza chamando a fun√ß√£o de v√°rias maneiras equivalentes:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="n">r</span> <span class="o">=</span> <span class="mi">25</span>  <span class="c1"># pizza com di√¢metro de 50cm!
</span><span class="n">corte</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="p">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">8</span>  <span class="c1"># um de oito peda√ßos da pizza
</span>
<span class="c1"># todos os chamados √† fun√ß√£o abaixo s√£o equivalentes:
</span><span class="n">Apedaco</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">corte</span><span class="p">)</span>
<span class="n">Apedaco</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">raio</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">corte</span><span class="p">)</span>
<span class="n">Apedaco</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">theta</span><span class="o">=</span><span class="n">corte</span><span class="p">,</span> <span class="n">raio</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
<span class="n">Apedaco</span> <span class="o">=</span> <span class="n">area_pizza</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">corte</span><span class="p">)</span>
</code></pre></div></div>

<p>Valores pr√©-definidos s√£o uma excelente op√ß√£o para fun√ß√µes mais complexas, permitindo ao usu√°rio utilizar rapidamente suas fun√ß√µes confiando que voc√™ escolheu valores sensatos para os argumentos opcionais!</p>

<p>Por exemplo, argumentos como precis√£o, toler√¢ncia, m√©todo de c√°lculo e n√∫mero m√°ximo de itera√ß√µes de um procedimento num√©rico podem ter valores pr√©-definidos que sejam razo√°veis para a maior parte das situa√ß√µes pr√°ticas. Caso o usu√°rio deseje ou precise, ele pode alterar os argumentos opcionais por sua pr√≥pria conta. Essa maneira de trabalhar ser√° muito importante quando come√ßarmos a ver os m√©todos do c√°lculo num√©rico.</p>
:ET